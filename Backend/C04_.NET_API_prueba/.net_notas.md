# .NET Framework y .NET Core

## ¿Qué es .NET Framework?

.NET Framework es una **plataforma de desarrollo** creada por Microsoft que permite construir y ejecutar aplicaciones de manera eficiente y robusta. Proporciona un entorno de ejecución completo y un conjunto extenso de bibliotecas para el desarrollo de software.

## Instalación

### Opciones de Instalación
1. **Sitio web oficial de Microsoft**: Descarga directa del framework
2. **Visual Studio**: A través del wizard del instalador
3. **Desarrollo Backend**: Configuración específica para aplicaciones de servidor

### Instalación con Visual Studio
```bash
# Al instalar Visual Studio, seleccionar:
# - Desarrollo web y ASP.NET
# - Desarrollo de aplicaciones de escritorio .NET
# - Herramientas de desarrollo de API
```

## Funcionalidades Principales

### 1. Lenguajes de Programación Múltiples
Soporte para diversos lenguajes que se compilan al mismo código intermedio:
- C#
- VB.NET
- F#
- C++/CLI

### 2. Bibliotecas de Clases (Base Class Library - BCL)
Conjunto extenso de bibliotecas predefinidas para:
```csharp
// Ejemplo de uso de bibliotecas
using System;
using System.Collections.Generic;
using System.IO;
using System.Net.Http;
```

### 3. Common Language Runtime (CLR)
Motor de ejecución que proporciona:
- Gestión automática de memoria (Garbage Collection)
- Seguridad de tipos
- Manejo de excepciones
- Compilación Just-In-Time (JIT)

### 4. Interoperabilidad
```csharp
// Ejemplo de interoperabilidad con COM
[DllImport("user32.dll")]
public static extern int MessageBox(IntPtr hWnd, string text, string caption, uint type);
```

### 5. Desarrollo de Aplicaciones Web (ASP.NET)
```csharp
[ApiController]
[Route("api/[controller]")]
public class WeatherController : ControllerBase
{
    [HttpGet]
    public async Task<IActionResult> GetWeather()
    {
        // Lógica para obtener datos del clima
        return Ok(new { Temperature = 25, Humidity = 60 });
    }
}
```

### 6. Windows Forms y WPF
Tecnologías para desarrollo de aplicaciones de escritorio:

**Windows Forms:**
```csharp
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }
}
```

**WPF (Windows Presentation Foundation):**
```xml
<Window x:Class="WeatherApp.MainWindow">
    <Grid>
        <TextBlock Text="Clima Actual" FontSize="20"/>
    </Grid>
</Window>
```

### 7. Acceso a Bases de Datos (ADO.NET y Entity Framework)
```csharp
// Entity Framework ejemplo
public class WeatherContext : DbContext
{
    public DbSet<WeatherData> WeatherData { get; set; }
    
    protected override void OnConfiguring(DbContextOptionsBuilder optionsBuilder)
    {
        optionsBuilder.UseSqlServer("connection_string");
    }
}
```

### 8. Multihilo y Asincronía
```csharp
// Programación asíncrona
public async Task<WeatherData> GetWeatherDataAsync()
{
    using HttpClient client = new HttpClient();
    var response = await client.GetStringAsync("https://api.weather.com/data");
    return JsonSerializer.Deserialize<WeatherData>(response);
}
```

## Evolución Histórica de .NET

| Versión | Fecha de Lanzamiento | Características Claves |
|---------|---------------------|------------------------|
| .NET Framework 1.0 | Febrero 2002 | Introducción del CLR, ASP.NET, ADO.NET |
| .NET Framework 2.0 | Enero 2006 | Introducción de Generics, mejoras en API y ADO.NET 2.0 |
| .NET Framework 3.0 | Noviembre 2006 | Introducción de WPF, WCF, WF |
| .NET Framework 3.5 | Noviembre 2007 | Introducción de LINQ y mejoras en ASP.NET |
| .NET Framework 4.0 | Abril 2010 | Programación paralela, mejoras en rendimiento y Windows Forms |
| .NET Framework 4.5 | Agosto 2012 | Introducción de async y await, mejoras en ASP.NET |
| .NET Core 1.0 | Junio 2016 | Lanzamiento inicial, soporte para aplicaciones web y API |
| .NET Core 2.1 | Mayo 2018 | Soporte de LTS (Long-Term Support), mejoras en la API |
| .NET 5.0 | Noviembre 2020 | Unificación de .NET Core y .NET Framework, mejoras de rendimiento |
| .NET 8.0 | Noviembre 2023 | Última versión, mejoras en rendimiento y nuevas características |

## ¿Cuál Elegir?

### .NET Framework
✅ **Usar cuando:**
- Aplicaciones Windows exclusivamente
- Integración con tecnologías legacy
- Aplicaciones empresariales existentes

### .NET Core / .NET 5+
✅ **Usar cuando:**
- Aplicaciones multiplataforma (Windows, Linux, macOS)
- Microservicios y APIs REST
- Aplicaciones en contenedores (Docker)
- Mejor rendimiento y menor consumo de recursos

## Desarrollo de API para Datos del Clima

### Estructura Básica de una Web API

#### 1. Crear el Proyecto
```bash
dotnet new webapi -n WeatherAPI
cd WeatherAPI
```

#### 2. Modelo de Datos
```csharp
public class WeatherData
{
    public int Id { get; set; }
    public string City { get; set; } = string.Empty;
    public double Temperature { get; set; }
    public int Humidity { get; set; }
    public string Description { get; set; } = string.Empty;
    public DateTime Date { get; set; }
}
```

#### 3. Controlador de API
```csharp
[ApiController]
[Route("api/[controller]")]
public class WeatherController : ControllerBase
{
    private readonly ILogger<WeatherController> _logger;

    public WeatherController(ILogger<WeatherController> logger)
    {
        _logger = logger;
    }

    [HttpGet]
    public async Task<ActionResult<IEnumerable<WeatherData>>> GetWeatherData()
    {
        // Simulación de datos del clima
        var weatherData = new List<WeatherData>
        {
            new WeatherData 
            { 
                Id = 1, 
                City = "Buenos Aires", 
                Temperature = 22.5, 
                Humidity = 65, 
                Description = "Parcialmente nublado",
                Date = DateTime.Now 
            },
            new WeatherData 
            { 
                Id = 2, 
                City = "La Plata", 
                Temperature = 20.0, 
                Humidity = 70, 
                Description = "Soleado",
                Date = DateTime.Now 
            }
        };

        return Ok(weatherData);
    }

    [HttpGet("{city}")]
    public async Task<ActionResult<WeatherData>> GetWeatherByCity(string city)
    {
        // Lógica para buscar por ciudad
        var weatherData = new WeatherData
        {
            Id = 1,
            City = city,
            Temperature = 25.0,
            Humidity = 60,
            Description = "Soleado",
            Date = DateTime.Now
        };

        return Ok(weatherData);
    }

    [HttpPost]
    public async Task<ActionResult<WeatherData>> CreateWeatherData(WeatherData weatherData)
    {
        // Lógica para crear nuevo registro
        weatherData.Id = new Random().Next(1000);
        weatherData.Date = DateTime.Now;
        
        return CreatedAtAction(nameof(GetWeatherByCity), 
            new { city = weatherData.City }, weatherData);
    }
}
```

#### 4. Configuración en Program.cs
```csharp
var builder = WebApplication.CreateBuilder(args);

// Agregar servicios
builder.Services.AddControllers();
builder.Services.AddEndpointsApiExplorer();
builder.Services.AddSwaggerGen();

var app = builder.Build();

// Configurar pipeline HTTP
if (app.Environment.IsDevelopment())
{
    app.UseSwagger();
    app.UseSwaggerUI();
}

app.UseHttpsRedirection();
app.UseAuthorization();
app.MapControllers();

app.Run();
```

### Probar la API

#### Endpoints disponibles:
- `GET /api/weather` - Obtener todos los datos del clima
- `GET /api/weather/{city}` - Obtener clima por ciudad
- `POST /api/weather` - Crear nuevo registro de clima

#### Ejemplo de respuesta JSON:
```json
{
  "id": 1,
  "city": "Buenos Aires",
  "temperature": 22.5,
  "humidity": 65,
  "description": "Parcialmente nublado",
  "date": "2024-03-15T14:30:00"
}
```

## Integración con Frameworks Populares

### Entity Framework Core
```csharp
// Para acceso a base de datos
builder.Services.AddDbContext<WeatherContext>(options =>
    options.UseSqlServer(builder.Configuration.GetConnectionString("DefaultConnection")));
```

### AutoMapper
```csharp
// Para mapeo de objetos
builder.Services.AddAutoMapper(typeof(Program));
```

### Serilog
```csharp
// Para logging avanzado
builder.Host.UseSerilog((context, configuration) =>
    configuration.ReadFrom.Configuration(context.Configuration));
```

## Ventajas de Usar .NET para APIs

1. **Performance**: Excelente rendimiento y escalabilidad
2. **Multiplataforma**: Ejecuta en Windows, Linux y macOS
3. **Ecosystem**: Gran ecosistema de paquetes NuGet
4. **Tooling**: Excelente soporte en Visual Studio
5. **Documentation**: Documentación extensa y comunidad activa
6. **Security**: Características de seguridad integradas
7. **Testing**: Frameworks de testing robustos

---

*Este apunte cubre los fundamentos de .NET Framework y .NET Core, incluyendo el desarrollo de APIs. La práctica con proyectos reales ayudará a consolidar estos conceptos.*